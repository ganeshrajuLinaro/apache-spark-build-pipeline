From 4af8d25dfc6a5f51c26149799e693a8bf538aec0 Mon Sep 17 00:00:00 2001
From: tzolov <christian.tzolov@gmail.com>
Date: Wed, 17 Sep 2014 18:22:40 +0200
Subject: [PATCH] spark build

---
 assembly/pom.xml | 12 ++++++++++++
 pom.xml          |  2 +-
 2 files changed, 13 insertions(+), 1 deletion(-)

diff --git a/assembly/pom.xml b/assembly/pom.xml
index 799f8d9..61c1dda 100644
--- a/assembly/pom.xml
+++ b/assembly/pom.xml
@@ -40,6 +40,8 @@
     <deb.install.path>/usr/share/spark</deb.install.path>
     <deb.user>root</deb.user>
     <deb.bin.filemode>744</deb.bin.filemode>
+    <spark.examples.jar.basename>spark-examples-${project.version}-hadoop${hadoop.version}.jar</spark.examples.jar.basename>
+    <spark.examples.jar>${basedir}/../examples/target/${spark.jar.dir}/${spark.examples.jar.basename}</spark.examples.jar>
   </properties>
 
   <dependencies>
@@ -253,6 +255,16 @@
                         <prefix>${deb.install.path}/jars</prefix>
                       </mapper>
                     </data>
+                     <data>
+                      <src>${spark.examples.jar}</src>
+                      <type>file</type>
+                      <mapper>
+                        <type>perm</type>
+                        <user>${deb.user}</user>
+                        <group>${deb.user}</group>
+                        <prefix>${deb.install.path}/jars</prefix>
+                      </mapper>
+                    </data>
                     <data>
                       <src>${basedir}/src/deb/RELEASE</src>
                       <type>file</type>
diff --git a/pom.xml b/pom.xml
index 5235b90..b798b1d 100644
--- a/pom.xml
+++ b/pom.xml
@@ -95,7 +95,6 @@
     <module>sql/core</module>
     <module>sql/hive</module>
     <module>repl</module>
-    <module>assembly</module>
     <module>external/twitter</module>
     <module>external/kafka</module>
     <module>external/flume</module>
@@ -103,6 +102,7 @@
     <module>external/zeromq</module>
     <module>external/mqtt</module>
     <module>examples</module>
+    <module>assembly</module>
   </modules>
 
   <properties>
-- 
1.8.3.4 (Apple Git-47)

